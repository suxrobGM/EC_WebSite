@page
@model EC_WebSite.Pages.Home.IndexModel
@{
    ViewData["Title"] = "Hearts of Iron IV: Economic Crisis";
}

<div class="row">
    <div class="col-8 col-sm-9">
        <hr class="dropdown-divider" />
        <span class="h3">Development News</span>
        @if (User.IsInRole("SuperAdmin") || User.IsInRole("Admin") || User.IsInRole("Developer") || User.IsInRole("Moderator"))
        {
            <span class="mx-2"><a asp-page="/Home/CreateArticle" class="btn-sm btn-info">Create Article</a></span>
        }
        <hr class="dropdown-divider" />
    </div>   
    <div class="col-8 col-sm-9">
        @foreach (var article in Model.Articles.Take(10))
        {
            <div class="card shadow-lg">
                <div class="card-header">
                    <b>@article.Topic</b>                    
                    <b class="float-right">@article.CreatedTime.Value.ToString("MMM dd yyyy HH:mm")</b>
                </div>
                <div class="card-body">
                    <p>@article.Summary</p>
                    <img class="rounded mw-100" src="@article.CoverPhoto.GetDataBase64()" alt="article cover photo" />
                </div>
            </div>
        }
    </div>
    <div class="col-4 col-sm-3">
        <iframe src="https://discordapp.com/widget?id=261512941440860161&theme=dark" height="300" allowtransparency="true" frameborder="0"></iframe>
    </div>
</div>

